<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1.0">
  <!-- Link semantic-ui -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.14/semantic.min.css">
  <!-- Add jquery -->
  <link href="https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.css" rel="stylesheet" />
  <title>WATCH-THIS-NOW</title>
</head>

<body class="bg-light">>
  <div class="ui pointing menu" style="background-color:black;color:white">
    <h2 class="item" style="background-color:black;color:white">Find Your Movies</h2>
    <div class="left menu">
      <div class="item">
        <div class="ui search">
          <div class="ui transparent icon input" style="background-color:white;color:black">
            <!-- <label for="keyword">Movie:</label> -->
            <!-- <input class="ui search prompt" type="text" id="keyword" autocomplete="on" placeholder="Search movies..."> -->
            <input class="prompt" id="keyword" type="text" placeholder="Search movies...">
            <div class="ui two buttons">
              <button class="medium ui button" id="searchBtn">
                <i class="search link icon"></i>
              </button>
              <button class="medium ui button" id="clearSearchBtn">
                <i class="trash link icon"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <section class="ui two column grid">
    <div class="column center aligned">
      <div class="ui raised very padded container segment">
        <h1 class="">To Be watched</h1>
        <div class="ui grid" style="max-height:85vh; background:#B8DAFF;overflow:auto">
          <div id="to-be-watched" class="ui two cards"></div>
        </div>
      </div>
    </div>
    <section class="ui column">
      <div class="column center aligned">
        <div class="ui raised very padded container segment">
          <h1>Watching</h1>
          <div class="ui four doubling cards" id="watching" style="height:40vh;background:#90DFAF;overflow:auto"></div>
        </div>
      </div>
      <div class="column center aligned">
        <div class="ui raised very padded container segment">
          <h1>Watched</h1>
          <div class="ui cards" id="watched" style="height:40vh;background:#CEC5C5;overflow:auto"></div>
        </div>
      </div>
    </section>
  </section>
  <!-- Comment here to enable results on main page -->
  <!-- <article class="center aligned" style="margin-top:20px;padding-left:20px;background:#D578D3">
    <h2 class="ui dividing header"></h2>
    <h2>Results</h2>
    <div id="results" class="ui cards"></div>
  </article> -->
  <!-- Comment end here to enable results on main page -->
  <div class="ui modal" id="trailer-modal">
    <i class="close icon" id="trailer-close"></i>
    <div class="header" id="trailer-title">
    </div>
    <div class="image content">
      <div class="ui medium image">
        <iframe id="video-player" width="560" height="315" title="YouTube video player" frameborder="0"
          allow="accelerometer; autoplay;clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen>
        </iframe>
      </div>
      <div class="description" style="margin-left:250px" id="trailer-description">
      </div>
    </div>
  </div>
  <!-- Modal widow for search Results -->
  <div class="ui fullscreen modal" id="resultsmodal">
    <i class="close icon" id="results-close"></i>
    <div class="header" id="results-title">
      <h1>Search Results</h1>
    </div>
    <div class="scrolling content" style="padding-left:80px;background:lightpink">
      <div id="results" class="ui cards"></div>
    </div>
  </div>
  </main>
  <!-- ✅ load jQuery ✅ -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <!-- ✅ load jQuery UI ✅ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"
    integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.14/semantic.min.js"></script>
  <script src="./assets/js/movie.js"></script>
  <script src="./assets/js/ui.js"></script>
  <script src="./assets/js/fetch_api.js"></script>
  <script>
    $("#searchBtn").on("click", function (event) {
      var keyword = $("#keyword").val();
      console.log("click");
      $("#results").empty();
      var movies = searchMovie(keyword, $("#results"));

      // Comment starting here to disable search results modal
      // if (movies > 0) {

      $("#resultsmodal").modal({
        centered: false
      }).modal("show");

      setTimeout(function () {
        $('.ui.modal').modal('refresh');
      }, 300);
      // }
      // Comment end here to disable search results modal
    });

    $("#keyword").on("keyup", function (event) {
      if (event.keyCode === 13) {
        event.preventDefault();
        $("#searchBtn").click();
      }
    });

    $("#results-close").on("click", function (event) {
      $("#results").empty();
      $("resultsmodal").modal("hide");
    });

    $("#trailer-close").on("click", function (event) {
      $("#video-player").attr("src", "");
      $("#trailer-modal").modal("hide");
    });

    // If the document is ready reload
    $(document).ready(function () {
      // Reload the page
      reloadMovies();
      $('.ui.search')
        .search({
          source: getSearchContent(),
          showNoResults: false
        })
        ;
    });
  </script>
</body>

</html>